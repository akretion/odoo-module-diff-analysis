PR: https://github.com/odoo/odoo/pull/

From: 9d710df076b85ebe0f3db4491676f005c31631fe
From: Mitali Patel
Date: 2019-07-03 11:16:24

Structural Changes: 5
Total Changes: 8

[REF] *: use the new decimal precision syntax

Since previous commit moved decimal_precision module's feature into base,
use the new syntax for fields declaration
Remove the imports to the removed module
Remove the module from dependency in manifest

sed -i "s|digits=dp.get_precision('\([A-Z a-z]*\)')|digits='\1'|" **.py
sed -i "/from odoo.tools import decimal_precision as dp/d" **py

================================= pseudo patch: =================================

--- a/addons/lunch/models/lunch_order.py
+++ b/addons/lunch/models/lunch_order.py
@@ -3,7 +3,6 @@
 
 from odoo import api, fields, models, _
 from odoo.exceptions import ValidationError
-from odoo.addons import decimal_precision as dp
 
 
 class LunchOrder(models.Model):
@@ -29,7 +28,7 @@ class LunchOrder(models.Model):
                               default=lambda self: self.env.uid)
     note = fields.Text('Notes')
     price = fields.Float('Total Price', compute='_compute_total_price', readonly=True, store=True,
-                         digits=dp.get_precision('Account'))
+                         digits='Account')
     active = fields.Boolean('Active', default=True)
     state = fields.Selection([('new', 'To Order'),
                               ('ordered', 'Ordered'),

--- a/addons/lunch/models/lunch_product.py
+++ b/addons/lunch/models/lunch_product.py
@@ -3,7 +3,6 @@
 
 from odoo import api, fields, models, tools
 
-from odoo.addons import decimal_precision as dp
 from odoo.tools import formatLang
 
 
@@ -69,7 +68,7 @@ class LunchTopping(models.Model):
     name = fields.Char('Name', required=True)
     company_id = fields.Many2one('res.company', default=lambda self: self.env.company)
     currency_id = fields.Many2one('res.currency', related='company_id.currency_id')
-    price = fields.Float('Price', digits=dp.get_precision('Account'), required=True)
+    price = fields.Float('Price', digits='Account', required=True)
     category_id = fields.Many2one('lunch.product.category')
     topping_category = fields.Integer('Topping Category', help="This field is a technical field", required=True, default=1)
 
@@ -91,7 +90,7 @@ class LunchProduct(models.Model):
     name = fields.Char('Product Name', required=True)
     category_id = fields.Many2one('lunch.product.category', 'Product Category', required=True)
     description = fields.Text('Description')
-    price = fields.Float('Price', digits=dp.get_precision('Account'), required=True)
+    price = fields.Float('Price', digits='Account', required=True)
     supplier_id = fields.Many2one('lunch.supplier', 'Vendor', required=True)
     active = fields.Boolean(default=True)
 
