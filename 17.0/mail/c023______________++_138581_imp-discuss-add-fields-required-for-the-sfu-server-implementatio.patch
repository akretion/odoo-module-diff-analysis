PR: https://github.com/odoo/odoo/pull/138581

From: 2bba00dd69c9100d3805b090cf8025afd1ceb8d3
From: TSO
Date: 2023-10-17 10:05:50

Structural Changes: 4
Total Changes: 4

[IMP] discuss: add fields required for the SFU server implementation

Related PR: https://github.com/odoo/odoo/pull/132153

task-2765922

closes odoo/odoo#138581

Signed-off-by: SÃ©bastien Theys (seb) <seb@odoo.com>

================================= pseudo patch: =================================

--- a/addons/mail/models/discuss/discuss_channel.py
+++ b/addons/mail/models/discuss/discuss_channel.py
@@ -69,6 +69,8 @@ class Channel(models.Model):
         'discuss.channel.member', 'channel_id', string='Members',
         groups='base.group_user')
     pinned_message_ids = fields.One2many('mail.message', 'res_id', domain=[('model', '=', 'discuss.channel'), ('pinned_at', '!=', False)], string='Pinned Messages')
+    sfu_channel_uuid = fields.Char(groups="base.group_system")
+    sfu_server_url = fields.Char(groups="base.group_system")
     rtc_session_ids = fields.One2many('discuss.channel.rtc.session', 'channel_id', groups="base.group_system")
     is_member = fields.Boolean('Is Member', compute='_compute_is_member', search='_search_is_member')
     member_count = fields.Integer(string="Member Count", compute='_compute_member_count', compute_sudo=True)

--- a/addons/mail/models/res_config_settings.py
+++ b/addons/mail/models/res_config_settings.py
@@ -36,6 +36,8 @@ class ResConfigSettings(models.TransientModel):
         'Twilio Account Auth Token',
         config_parameter='mail.twilio_account_token',
     )
+    sfu_server_url = fields.Char("SFU Server URL", config_parameter="mail.sfu_server_url")
+    sfu_server_key = fields.Char("SFU Server key", config_parameter="mail.sfu_server_key", help="Base64 encoded key")
     email_primary_color = fields.Char(related='company_id.email_primary_color', readonly=False)
     email_secondary_color = fields.Char(related='company_id.email_secondary_color', readonly=False)
 
