PR: https://github.com/odoo/odoo/pull/

From: 838a6f200014072a06cbe4850fe8dc2ce7765107
From: Thibault Delavall√©e
Date: 2016-08-09 09:00:10

Structural Changes: 5.4
Total Changes: 14

[FIX] varioius: fix digits_compute attribute changed to digits in new API

================================= pseudo patch: =================================

--- a/addons/mrp/models/mrp_bom.py
+++ b/addons/mrp/models/mrp_bom.py
@@ -36,7 +36,7 @@ class MrpBom(models.Model):
     bom_line_ids = fields.One2many('mrp.bom.line', 'bom_id', 'BoM Lines', copy=True)
     product_qty = fields.Float(
         'Quantity', default=1.0,
-        digits_compute=dp.get_precision('Unit of Measure'), required=True)
+        digits=dp.get_precision('Unit of Measure'), required=True)
     product_uom_id = fields.Many2one(
         'product.uom', 'Product Unit of Measure',
         default=_get_default_product_uom_id, oldname='product_uom', required=True,
@@ -151,7 +151,7 @@ class MrpBomLine(models.Model):
         'product.product', 'Product', required=True)
     product_qty = fields.Float(
         'Product Quantity', default=1.0,
-        digits_compute=dp.get_precision('Product Unit of Measure'), required=True)
+        digits=dp.get_precision('Product Unit of Measure'), required=True)
     product_uom_id = fields.Many2one(
         'product.uom', 'Product Unit of Measure',
         default=_get_default_product_uom_id,

--- a/addons/mrp/models/mrp_production.py
+++ b/addons/mrp/models/mrp_production.py
@@ -56,7 +56,7 @@ class MrpProduction(models.Model):
     product_tmpl_id = fields.Many2one('product.template', 'Product Template', related='product_id.product_tmpl_id')
     product_qty = fields.Float(
         'Quantity to Produce',
-        default=1.0, digits_compute=dp.get_precision('Product Unit of Measure'),
+        default=1.0, digits=dp.get_precision('Product Unit of Measure'),
         readonly=True, required=True,
         states={'confirmed': [('readonly', False)]})
     product_uom_id = fields.Many2one(

--- a/addons/mrp/models/mrp_workorder.py
+++ b/addons/mrp/models/mrp_workorder.py
@@ -53,11 +53,11 @@ class MrpWorkorder(models.Model):
     qty_produced = fields.Float(
         'Quantity', default=0.0,
         readonly=True,
-        digits_compute=dp.get_precision('Product Unit of Measure'),
+        digits=dp.get_precision('Product Unit of Measure'),
         help="The number of products already handled by this work order")
     qty_producing = fields.Float(
         'Currently Produced Quantity', default=1.0,
-        digits_compute=dp.get_precision('Product Unit of Measure'),
+        digits=dp.get_precision('Product Unit of Measure'),
         states={'done': [('readonly', True)], 'cancel': [('readonly', True)]})
     is_produced = fields.Boolean(compute='_compute_is_produced')
 

--- a/addons/mrp/models/stock_move.py
+++ b/addons/mrp/models/stock_move.py
@@ -66,11 +66,11 @@ class StockMove(models.Model):
     # Quantities to process, in normalized UoMs
     quantity_available = fields.Float(
         'Quantity Available', compute="_qty_available",
-        digits_compute=dp.get_precision('Product Unit of Measure'))
+        digits=dp.get_precision('Product Unit of Measure'))
     quantity_done_store = fields.Float('Quantity', digits=0)
     quantity_done = fields.Float(
         'Quantity', compute='_qty_done_compute', inverse='_qty_done_set',
-        digits_compute=dp.get_precision('Product Unit of Measure'))
+        digits=dp.get_precision('Product Unit of Measure'))
     move_lot_ids = fields.One2many('stock.move.lots', 'move_id', string='Lots')
     bom_line_id = fields.Many2one('mrp.bom.line', 'BoM Line')
     unit_factor = fields.Float('Unit Factor')
