PR: https://github.com/odoo/odoo/pull/

From: 1e9772889ba6969961aab0e87fd018494d6b15bb
From: SÃ©bastien Theys
Date: 2019-08-02 16:47:58

Structural Changes: 5
Total Changes: 149

[IMP] *: use image.mixin when appropriate

The following models are already using big images, or they might need big images
in the future:

- partner
- hr employee
- shop category
- lunch product
- gamification badge and karma rank

PR: #34925

================================= pseudo patch: =================================

--- a/odoo/addons/base/data/res_partner_data.xml
+++ b/odoo/addons/base/data/res_partner_data.xml
@@ -11,7 +11,7 @@
             <field name="phone"></field>
             <field name="email">info@yourcompany.com</field>
             <field name="website">www.yourcompany.com</field>
-            <field name="image" type="base64" file="base/static/img/res_company_logo.png"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_company_logo.png"/>
         </record>
 
         <record model="res.partner" id="base.partner_root">
@@ -25,7 +25,7 @@
             <field name="name">Administrator</field>
             <field name="company_id" ref="main_company"/>
             <field name="email">admin@example.com</field>
-            <field name="image" type="base64" file="base/static/img/avatar_grey.png"/>
+            <field name="image_1920" type="base64" file="base/static/img/avatar_grey.png"/>
         </record>
 
         <record id="public_partner" model="res.partner">

--- a/odoo/addons/base/data/res_partner_demo.xml
+++ b/odoo/addons/base/data/res_partner_demo.xml
@@ -51,7 +51,7 @@
             <field name="email">wood.corner26@example.com</field>
             <field name="phone">(623)-853-7197</field>
             <field name="website">http://www.wood-corner.com</field>
-            <field name="image" type="base64" file="base/static/img/res_partner_1-image.png"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_1-image.png"/>
         </record>
         <record id="res_partner_2" model="res.partner">
             <field name="name">Deco Addict</field>
@@ -65,7 +65,7 @@
             <field name="email">deco.addict82@example.com</field>
             <field name="phone">(603)-996-3829</field>
             <field name="website">http://www.deco-addict.com</field>
-            <field name="image" type="base64" file="base/static/img/res_partner_2-image.png"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_2-image.png"/>
         </record>
         <record id="res_partner_3" model="res.partner">
             <field name="name">Gemini Furniture</field>
@@ -79,9 +79,9 @@
             <field name="email">gemini.furniture39@example.com</field>
             <field name="phone">(941)-284-4875</field>
             <field name="website">http://www.gemini-furniture.com/</field>
-            <field name="image" type="base64" file="base/static/img/res_partner_3-image.png"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_3-image.png"/>
         </record>
-        
+
         <record id="res_partner_4" model="res.partner">
             <field name="name">Ready Mat</field>
             <field eval="[(6, 0, [ref('res_partner_category_14'), ref('res_partner_category_12')])]" name="category_id"/>
@@ -94,7 +94,7 @@
             <field name="email">ready.mat28@example.com</field>
             <field name="phone">(803)-873-6126</field>
             <field name="website">http://www.ready-mat.com/</field>
-            <field name="image" type="base64" file="base/static/img/res_partner_4-image.png"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_4-image.png"/>
         </record>
 
         <record id="res_partner_10" model="res.partner">
@@ -107,9 +107,9 @@
             <field name="country_id" ref="base.us"/>
             <field name="email">jackson.group82@example.com</field>
             <field name="phone">(334)-502-1024</field>
-            <field name="image" type="base64" file="base/static/img/res_partner_10-image.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_10-image.jpg"/>
         </record>
-  
+
         <record id="res_partner_12" model="res.partner">
             <field name="name">Azure Interior</field>
             <field eval="[(6, 0, [ref('res_partner_category_11')])]" name="category_id"/>
@@ -122,7 +122,7 @@
             <field name="country_id" ref="base.us"/>
             <field name="email">azure.Interior24@example.com</field>
             <field name="website">http://www.azure-interior.com</field>
-            <field name="image" type="base64" file="base/static/img/res_partner_12-image.png"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_12-image.png"/>
         </record>
 
         <record id="res_partner_18" model="res.partner">
@@ -136,7 +136,7 @@
             <field name="phone">(828)-316-0593</field>
             <field name="country_id" ref="base.us"/>
             <field name="website">http://www.lumber-inc.com</field>
-            <field name="image" type="base64" file="base/static/img/res_partner_18-image.png"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_18-image.png"/>
         </record>
 
         <record id="res_partner_address_1" model="res.partner">

--- a/odoo/addons/base/data/res_partner_image_demo.xml
+++ b/odoo/addons/base/data/res_partner_image_demo.xml
@@ -3,103 +3,103 @@
     <data noupdate="0">
 
         <record id="base.res_partner_address_1" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_1.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_1.jpg"/>
         </record>
 
         <record id="base.res_partner_address_2" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_2.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_2.jpg"/>
         </record>
 
         <record id="base.res_partner_address_3" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_3.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_3.jpg"/>
         </record>
 
         <record id="base.res_partner_address_4" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_4.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_4.jpg"/>
         </record>
 
         <record id="base.res_partner_address_5" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_5.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_5.jpg"/>
         </record>
 
         <record id="base.res_partner_address_7" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_7.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_7.jpg"/>
         </record>
 
         <record id="base.res_partner_address_10" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_10.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_10.jpg"/>
         </record>
 
         <record id="base.res_partner_address_11" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_11.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_11.jpg"/>
         </record>
 
         <record id="base.res_partner_address_13" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_13.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_13.jpg"/>
         </record>
 
         <record id="base.res_partner_address_14" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_14.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_14.jpg"/>
         </record>
 
         <record id="base.res_partner_address_15" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_15.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_15.jpg"/>
         </record>
 
         <record id="base.res_partner_address_16" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_16.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_16.jpg"/>
         </record>
 
         <record id="base.res_partner_address_17" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_17.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_17.jpg"/>
         </record>
 
         <record id="base.res_partner_address_18" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_18.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_18.jpg"/>
         </record>
 
         <record id="base.res_partner_address_24" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_24.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_24.jpg"/>
         </record>
 
         <record id="base.res_partner_address_25" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_25.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_25.jpg"/>
         </record>
 
         <record id="base.res_partner_address_27" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_27.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_27.jpg"/>
         </record>
 
         <record id="base.res_partner_address_28" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_28.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_28.jpg"/>
         </record>
 
         <record id="base.res_partner_address_30" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_30.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_30.jpg"/>
         </record>
 
         <record id="base.res_partner_address_31" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_31.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_31.jpg"/>
         </record>
 
         <record id="base.res_partner_address_32" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_32.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_32.jpg"/>
         </record>
 
         <record id="base.res_partner_address_33" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_33.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_33.jpg"/>
         </record>
 
         <record id="base.res_partner_address_34" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_address_34.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_address_34.jpg"/>
         </record>
 
         <record id="base.res_partner_main1" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_main1.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_main1.jpg"/>
         </record>
 
         <record id="base.res_partner_main2" model="res.partner">
-            <field name="image" type="base64" file="base/static/img/res_partner_main2.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/res_partner_main2.jpg"/>
         </record>
 
     </data>

--- a/odoo/addons/base/data/res_users_data.xml
+++ b/odoo/addons/base/data/res_users_data.xml
@@ -36,7 +36,7 @@ Administrator</span>]]></field>
             <field name="password"></field>
             <!-- Avoid auto-including this demo user in any default group -->
             <field name="groups_id" eval="[(6,0,[])]"/>
-            <field name="image" type="base64" file="base/static/img/public_user-image.png"/>
+            <field name="image_1920" type="base64" file="base/static/img/public_user-image.png"/>
             <field name="partner_id" ref="public_partner"/>
             <field name="active" eval="False"/>
         </record>

--- a/odoo/addons/base/data/res_users_demo.xml
+++ b/odoo/addons/base/data/res_users_demo.xml
@@ -36,7 +36,7 @@
             <field name="signature" type="xml"><span>-- <br/>+Mr Demo</span></field>
             <field name="company_id" ref="main_company"/>
             <field name="groups_id" eval="[(6,0,[ref('base.group_user'), ref('base.group_partner_manager')])]"/>
-            <field name="image" type="base64" file="base/static/img/user_demo-image.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/user_demo-image.jpg"/>
         </record>
 
         <record model="res.partner" id="base.partner_root">
@@ -55,7 +55,7 @@
             <field name="phone">+1 555-555-5555</field>
             <field name="email">admin@yourcompany.example.com</field>
             <field name="tz">Europe/Brussels</field>
-            <field name="image" type="base64" file="base/static/img/partner_root-image.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/partner_root-image.jpg"/>
         </record>
 
 
@@ -69,7 +69,7 @@
             <field name="zip">07002</field>
             <field name="country_id" ref="base.us"/>
             <field name="company_name">YourCompany</field>
-            <field name="image" type="base64" file="base/static/img/partner_demo_portal.jpg"/>
+            <field name="image_1920" type="base64" file="base/static/img/partner_demo_portal.jpg"/>
             <field name="phone">(683)-556-5104</field>
         </record>
         <record id="demo_user0" model="res.users" context="{'no_reset_password': True}">

--- a/odoo/addons/base/models/res_company.py
+++ b/odoo/addons/base/models/res_company.py
@@ -70,7 +70,7 @@ class Company(models.Model):
     partner_id = fields.Many2one('res.partner', string='Partner', required=True)
     report_header = fields.Text(string='Company Tagline', help="Appears by default on the top right corner of your printed documents (report header).")
     report_footer = fields.Text(string='Report Footer', translate=True, help="Footer text displayed at the bottom of all reports.")
-    logo = fields.Binary(related='partner_id.image', default=_get_logo, string="Company Logo", readonly=False)
+    logo = fields.Binary(related='partner_id.image_1920', default=_get_logo, string="Company Logo", readonly=False)
     # logo_web: do not store in attachments, since the image is retrieved in SQL for
     # performance reasons (see addons/web/controllers/main.py, Binary.company_logo)
     logo_web = fields.Binary(compute='_compute_logo_web', store=True, attachment=False)
@@ -154,10 +154,10 @@ class Company(models.Model):
         for company in self:
             company.partner_id.country_id = company.country_id
 
-    @api.depends('partner_id', 'partner_id.image')
+    @api.depends('partner_id.image_1920')
     def _compute_logo_web(self):
         for company in self:
-            company.logo_web = tools.image_process(company.partner_id.image, size=(180, 0))
+            company.logo_web = tools.image_process(company.partner_id.image_1920, size=(180, 0))
 
     @api.onchange('state_id')
     def _onchange_state(self):
@@ -218,7 +218,7 @@ class Company(models.Model):
         partner = self.env['res.partner'].create({
             'name': vals['name'],
             'is_company': True,
-            'image': vals.get('logo'),
+            'image_1920': vals.get('logo'),
             'email': vals.get('email'),
             'phone': vals.get('phone'),
             'website': vals.get('website'),

--- a/odoo/addons/base/models/res_partner.py
+++ b/odoo/addons/base/models/res_partner.py
@@ -15,7 +15,7 @@ import requests
 from lxml import etree
 from werkzeug import urls
 
-from odoo import api, fields, models, tools, SUPERUSER_ID, _
+from odoo import api, fields, models, tools, _
 from odoo.modules import get_module_resource
 from odoo.osv.expression import get_unaccent_wrapper
 from odoo.exceptions import UserError, ValidationError
@@ -130,7 +130,7 @@ class PartnerTitle(models.Model):
 
 class Partner(models.Model):
     _description = 'Contact'
-    _inherit = ['format.address.mixin']
+    _inherit = ['format.address.mixin', 'image.mixin']
     _name = "res.partner"
     _order = "display_name"
 
@@ -220,16 +220,6 @@ class Partner(models.Model):
                                           store=True)
     company_name = fields.Char('Company Name')
 
-    # image: all image fields are base64 encoded and PIL-supported
-    image = fields.Binary("Image")
-    image_128 = fields.Binary("Medium-sized image",
-        help="Medium-sized image of this contact. It is automatically "\
-             "resized as a 128x128px image, with aspect ratio preserved. "\
-             "Use this field in form views or some kanban views.")
-    image_64 = fields.Binary("Small-sized image",
-        help="Small-sized image of this contact. It is automatically "\
-             "resized as a 64x64px image, with aspect ratio preserved. "\
-             "Use this field anywhere a small image is required.")
     # hack to allow using plain browse record in qweb views, and used in ir.qweb.field.contact
     self = fields.Many2one(comodel_name=_name, compute='_compute_get_ids')
 
@@ -329,7 +319,7 @@ class Partner(models.Model):
         colorize, img_path, image_base64 = False, False, False
 
         if partner_type in ['other'] and parent_id:
-            parent_image = self.browse(parent_id).image
+            parent_image = self.browse(parent_id).image_1920
             image_base64 = parent_image or None
 
         if not image_base64 and partner_type == 'invoice':
@@ -348,7 +338,7 @@ class Partner(models.Model):
         if image_base64 and colorize:
             image_base64 = tools.image_process(image_base64, colorize=True)
 
-        return tools.image_process(image_base64, size=(1024, 1024))
+        return image_base64
 
     @api.model
     def _fields_view_get(self, view_id=None, view_type='form', toolbar=False, submenu=False):
@@ -408,8 +398,8 @@ class Partner(models.Model):
 
     @api.onchange('email')
     def onchange_email(self):
-        if not self.image and self._context.get('gravatar_image') and self.email:
-            self.image = self._get_gravatar_image(self.email)
+        if not self.image_1920 and self._context.get('gravatar_image') and self.email:
+            self.image_1920 = self._get_gravatar_image(self.email)
 
     @api.onchange('parent_id', 'company_id')
     def _onchange_company_id(self):
@@ -568,10 +558,6 @@ class Partner(models.Model):
                     if len(companies) > 1 or company not in companies:
                         raise UserError(
                             ("The selected company is not compatible with the companies of the related user(s)"))
-        # no padding on the big image, because it's used as website logo
-        tools.image_resize_images(vals, return_big=False)
-        tools.image_resize_images(vals, return_medium=False, return_small=False)
-
         result = True
         # To write in SUPERUSER on field is_company and avoid access rights problems.
         if 'is_company' in vals and self.user_has_groups('base.group_partner_manager') and not self.env.su:
@@ -595,11 +581,8 @@ class Partner(models.Model):
                 vals['company_name'] = False
             # compute default image in create, because computing gravatar in the onchange
             # cannot be easily performed if default images are in the way
-            if not vals.get('image'):
-                vals['image'] = self._get_default_image(vals.get('type'), vals.get('is_company'), vals.get('parent_id'))
-            # no padding on the big image, because it's used as website logo
-            tools.image_resize_images(vals, return_big=False)
-            tools.image_resize_images(vals, return_medium=False, return_small=False)
+            if not vals.get('image_1920'):
+                vals['image_1920'] = self._get_default_image(vals.get('type'), vals.get('is_company'), vals.get('parent_id'))
         partners = super(Partner, self).create(vals_list)
 
         if self.env.context.get('_partners_skip_fields_sync'):

--- a/odoo/addons/base/models/res_users.py
+++ b/odoo/addons/base/models/res_users.py
@@ -201,9 +201,9 @@ class Users(models.Model):
     __uid_cache = defaultdict(dict)             # {dbname: {uid: password}}
 
     # User can write on a few of his own fields (but not his groups for example)
-    SELF_WRITEABLE_FIELDS = ['signature', 'action_id', 'company_id', 'email', 'name', 'image', 'image_128', 'image_64', 'lang', 'tz']
+    SELF_WRITEABLE_FIELDS = ['signature', 'action_id', 'company_id', 'email', 'name', 'image_1920', 'lang', 'tz']
     # User can read a few of his own fields
-    SELF_READABLE_FIELDS = ['signature', 'company_id', 'login', 'email', 'name', 'image', 'image_128', 'image_64', 'lang', 'tz', 'tz_offset', 'groups_id', 'partner_id', '__last_update', 'action_id']
+    SELF_READABLE_FIELDS = ['signature', 'company_id', 'login', 'email', 'name', 'image_1920', 'image_1024', 'image_512', 'image_256', 'image_128', 'image_64', 'lang', 'tz', 'tz_offset', 'groups_id', 'partner_id', '__last_update', 'action_id']
 
     def _default_groups(self):
         default_user = self.env.ref('base.default_user', raise_if_not_found=False)

--- a/odoo/addons/base/tests/test_ir_http.py
+++ b/odoo/addons/base/tests/test_ir_http.py
@@ -40,14 +40,14 @@ class test_ir_http_mimetype(common.TransactionCase):
     def test_ir_http_mimetype_basic_field(self):
         """ Test mimetype for classic field """
         partner = self.env['res.partner'].create({
-            'image': GIF,
+            'image_1920': GIF,
             'name': 'Test mimetype basic field',
         })
 
         status, headers, content = self.env['ir.http'].binary_content(
             model='res.partner',
             id=partner.id,
-            field='image',
+            field='image_1920',
             default_mimetype='application/octet-stream',
         )
         mimetype = dict(headers).get('Content-Type')

--- a/odoo/addons/base/tests/test_orm.py
+++ b/odoo/addons/base/tests/test_orm.py
@@ -364,7 +364,7 @@ class TestInherits(TransactionCase):
         write_date_before = user.write_date
 
         # write base64 image
-        user.write({'image': 'R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='})
+        user.write({'image_1920': 'R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='})
         write_date_after = user.write_date
         self.assertNotEqual(write_date_before, write_date_after)
 

--- a/odoo/addons/base/views/res_partner_views.xml
+++ b/odoo/addons/base/views/res_partner_views.xml
@@ -67,7 +67,7 @@
                 <form string="Contact">
                     <field name="is_company" invisible="1"/>
                     <field name="type" invisible="1"/>
-                    <field name="image" widget='image' class="oe_avatar" options='{"preview_image": "image_128"}'/>
+                    <field name="image_1920" widget='image' class="oe_avatar" options='{"preview_image": "image_128"}'/>
                     <div class="oe_title">
                         <field name="company_type" options="{'horizontal': true}" class="oe_edit_only" widget="radio"  groups="base.group_no_one"/>
                         <h1>
@@ -97,7 +97,7 @@
             <field name="priority" eval="20"/>
             <field name="arch" type="xml">
                 <form string="Partner">
-                    <field name="image" widget='image' class="oe_avatar" options='{"preview_image": "image_128"}' readonly="1"/>
+                    <field name="image_1920" widget='image' class="oe_avatar" options='{"preview_image": "image_128"}' readonly="1"/>
                     <div class="oe_title">
                         <h1>
                             <field name="name" readonly="1"/>
@@ -135,7 +135,7 @@
             <field name="arch" type="xml">
                 <form string="Partners">
                 <sheet>
-                    <field name="image" widget='image' class="oe_avatar" options='{"preview_image": "image_128"}'/>
+                    <field name="image_1920" widget='image' class="oe_avatar" options='{"preview_image": "image_128"}'/>
                     <div class="oe_title">
                         <field name="is_company" invisible="1"/>
                         <field name="commercial_partner_id" invisible="1"/>
@@ -205,7 +205,7 @@
                 <sheet>
                     <widget name="web_ribbon" text="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                     <div class="oe_button_box" name="button_box"/>
-                    <field name="image" widget='image' class="oe_avatar" options='{"preview_image": "image_128"}'/>
+                    <field name="image_1920" widget='image' class="oe_avatar" options='{"preview_image": "image_128"}'/>
                     <div class="oe_title">
                         <field name="is_company" invisible="1"/>
                         <field name="commercial_partner_id" invisible="1"/>
@@ -373,11 +373,11 @@
                                                 <field name="mobile" widget="phone"/>
                                             </group>
                                             <group colspan="1">
-                                                <field name="image_128" widget="image" class="oe_avatar" nolabel="1"/>
+                                                <field name="image_1920" widget="image" class="oe_avatar" nolabel="1" options="{'image_preview': 'image_128'}"/>
                                             </group>
                                         </group>
                                         <field name="lang" invisible="True"/>
-                                        <field name="image" invisible="True"/>
+                                        <field name="image_1920" invisible="True"/>
                                         <field name="user_id" invisible="True"/>
                                     </sheet>
                                 </form>

--- a/odoo/addons/base/views/res_users_views.xml
+++ b/odoo/addons/base/views/res_users_views.xml
@@ -125,7 +125,7 @@
                         <div class="alert alert-info text-center mb-3" attrs="{'invisible': [('id', '>', 0)]}" role="alert">
                             You are inviting a new user.
                         </div>
-                        <field name="image" widget='image' class="oe_avatar" options='{"zoom": true, "preview_image": "image_128"}'/>
+                        <field name="image_1920" widget='image' class="oe_avatar" options='{"zoom": true, "preview_image": "image_128"}'/>
                         <div class="oe_title">
                             <label for="name" class="oe_edit_only"/>
                             <h1><field name="name" required="1"/></h1>
@@ -189,7 +189,7 @@
                             <field name="partner_id" required="0" readonly="1"/>
                           </div>
                         </div>
-                        <field name="image" widget='image' class="oe_avatar" options='{"preview_image": "image_128"}'/>
+                        <field name="image_1920" widget='image' class="oe_avatar" options='{"preview_image": "image_128"}'/>
                         <div class="oe_title">
                             <label for="name" class="oe_edit_only"/>
                             <h1><field name="name" required="1"/></h1>
@@ -342,7 +342,7 @@
             <field eval="18" name="priority"/>
             <field name="arch" type="xml">
                 <form string="Users">
-                    <field name="image" readonly="0" widget='image' class="oe_right oe_avatar" options='{"preview_image": "image_64"}'/>
+                    <field name="image_1920" readonly="0" widget='image' class="oe_right oe_avatar" options='{"preview_image": "image_64"}'/>
                     <h1>
                         <field name="name" readonly="1" class="oe_inline"/>
                     </h1>
