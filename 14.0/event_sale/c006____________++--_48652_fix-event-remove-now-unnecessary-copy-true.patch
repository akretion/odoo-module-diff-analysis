PR: https://github.com/odoo/odoo/pull/48652

From: cee2b11da2de2f7ead795ebebbc47bf1fd23a10a
From: Thibault Delavall√©e
Date: 2020-04-03 11:07:56

Structural Changes: 8
Total Changes: 10

[FIX] event_*: remove now unnecessary copy=True

Commit 397872a07fe22afa7d83b3170e3b037be1ae607a remove most onchange in event related modules to replace
them by computed r+w stored fields. At that time copy was by default set to
False for computed fields as resulting of standard behavior.

Since 4b274d3b4101fbae154a572cdf40d23838899773 this is not True anymore as we consider those fields are
duplicable. We can therefore remove unnecessary copy=True on fields to clean
their definitions.

Task ID 2228189
Community PR odoo/odoo#48652

X-original-commit: c6b378987bd3351deba7770b51c2a5755f7ff341

================================= pseudo patch: =================================

--- a/addons/event_sale/models/event_registration.py
+++ b/addons/event_sale/models/event_registration.py
@@ -12,9 +12,9 @@ class EventRegistration(models.Model):
     # TDE FIXME: maybe add an onchange on sale_order_id
     sale_order_id = fields.Many2one('sale.order', string='Source Sales Order', ondelete='cascade')
     sale_order_line_id = fields.Many2one('sale.order.line', string='Sales Order Line', ondelete='cascade')
-    utm_campaign_id = fields.Many2one(compute='_compute_utm_campaign_id', copy=True, readonly=False, store=True)
-    utm_source_id = fields.Many2one(compute='_compute_utm_source_id', copy=True, readonly=False, store=True)
-    utm_medium_id = fields.Many2one(compute='_compute_utm_medium_id', copy=True, readonly=False, store=True)
+    utm_campaign_id = fields.Many2one(compute='_compute_utm_campaign_id', readonly=False, store=True)
+    utm_source_id = fields.Many2one(compute='_compute_utm_source_id', readonly=False, store=True)
+    utm_medium_id = fields.Many2one(compute='_compute_utm_medium_id', readonly=False, store=True)
 
     @api.depends('sale_order_id')
     def _compute_utm_campaign_id(self):

--- a/addons/event_sale/models/event_ticket.py
+++ b/addons/event_sale/models/event_ticket.py
@@ -14,14 +14,14 @@ class EventTemplateTicket(models.Model):
     def _default_product_id(self):
         return self.env.ref('event_sale.product_product_event', raise_if_not_found=False)
 
-    description = fields.Text(compute='_compute_description', copy=True, readonly=False, store=True)
+    description = fields.Text(compute='_compute_description', readonly=False, store=True)
     # product
     product_id = fields.Many2one(
         'product.product', string='Product', required=True,
         domain=[("event_ok", "=", True)], default=_default_product_id)
     price = fields.Float(
         string='Price', compute='_compute_price',
-        digits='Product Price', copy=True, readonly=False, store=True)
+        digits='Product Price', readonly=False, store=True)
     price_reduce = fields.Float(
         string="Price Reduce", compute="_compute_price_reduce",
         digits='Product Price')
